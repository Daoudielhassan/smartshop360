[tool.ruff]
line-length = 100
target-version = "py311"
select = ["E", "F", "W", "I", "UP"]
ignore = ["E501", "F401", "W291"]
exclude = [
    ".git",
    "__pycache__",
    "*.egg-info",
    ".venv",
    "venv",
    "node_modules",
]

[tool.ruff.per-file-ignores]
"tests/*" = ["F811"]     # red√©finitions de fixtures pytest OK
"src/ui/*" = ["E402"]    # imports hors ordre dans Streamlit OK

[tool.pytest.ini_options]
testpaths = ["tests"]
python_files = ["test_*.py"]
addopts = "-v --tb=short"
markers = [
    "unit: Tests unitaires",
    "integration: Tests avec PostgreSQL",
    "slow: Tests lents",
]

[tool.coverage.run]
source = ["src"]
omit = [
    "*/tests/*",
    "*/__pycache__/*",
    "*/venv/*",
]

[tool.coverage.report]
show_missing = true
fail_under = 60
